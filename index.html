<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Camino - Jeu des rues de Marseille</title>

  <!-- Google Fonts : Montserrat (titres), Nunito (texte) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&family=Nunito:wght@400;600&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="style.css">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>

<body>
  <div id="app">
    <div id="sidebar">
      <!-- WRAPPER UNIQUE POUR D√âCALER TOUT LE CONTENU EN MOBILE -->
      <div id="sidebar-content">
        <!-- Bandeau titre -->
        <header class="panel header-panel">
          <div class="header-main">
            <h1 class="header-title">Camino</h1>
            <p class="header-subtitle">Connaissez-vous vraiment votre ville ?</p>
          </div>

          <!-- Petit statut carte, particuli√®rement utile sur mobile -->
          <div id="map-status" class="map-status-pill">
            <!-- rempli par le JS -->
          </div>
        </header>

        <!-- Panneau profil / auth repliable -->
        <section class="panel user-panel">
          <details>
            <summary class="panel-title">Profil <span id="user-sticker" class="user-sticker"></span></summary>

            <div class="info-block">
              <div id="current-user-label" class="info-label">Non connect√©.</div>
            </div>

            <div class="info-block auth-block">
              <input id="auth-username" type="text" placeholder="Pseudo">
              <input id="auth-password" type="password" placeholder="Mot de passe">
              <div class="auth-buttons">
                <button id="login-btn" class="btn-secondary">Connexion</button>
                <button id="register-btn" class="btn-secondary">Inscription</button>
                <button id="logout-btn" class="btn-tertiary" style="display:none;">D√©connexion</button>
              </div>
            </div>
          </details>
        </section>

        <!-- Panneau param√®tres -->
        <section class="panel panel-params">
          <div class="panel-title-row"
            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <div class="panel-title" style="margin-bottom: 0;">Param√®tres</div>
            <button id="daily-mode-btn" class="btn-emphasis"
              style="display:none; padding: 4px 10px; font-size: 11px; margin: 0; width: auto; min-width: 0; min-height: 0;">üèÜ
              Daily</button>
          </div>

          <div class="info-block" id="mode-select-block">
            <label>Zone de jeu :</label>

            <div id="mode-select-wrapper" class="custom-select">
              <button id="mode-select-button" class="custom-select-button">
                <span class="custom-select-label">Rues c√©l√®bres</span>
                <span class="difficulty-pill difficulty-pill--very-easy">Facile</span>
              </button>
              <ul id="mode-select-list" class="custom-select-list">
                <li data-value="rues-celebres">Rues c√©l√®bres <span
                    class="difficulty-pill difficulty-pill--very-easy">Facile</span></li>
                <li data-value="rues-principales">Rues principales <span
                    class="difficulty-pill difficulty-pill--easy">Moins Facile</span></li>
                <li data-value="quartier">Par quartier <span
                    class="difficulty-pill difficulty-pill--medium">Faisable</span></li>
                <li data-value="ville">Ville enti√®re <span
                    class="difficulty-pill difficulty-pill--hard">Difficile</span></li>
                <li data-value="monuments">Monuments <span
                    class="difficulty-pill difficulty-pill--medium">Faisable</span></li>
              </ul>
            </div>

            <select id="mode-select" style="display:none !important;">
              <option value="rues-celebres" selected>Rues c√©l√®bres</option>
              <option value="rues-principales">Rues principales</option>
              <option value="quartier">Par quartier</option>
              <option value="ville">Ville enti√®re</option>
              <option value="monuments">Monuments</option>
            </select>
          </div>

          <div class="info-block" id="quartier-block" style="display:none;">
            <label for="quartier-select">Quartier :</label>

            <!-- Faux select styl√© pour les quartiers (PAS de pastille) -->
            <div id="quartier-select-wrapper" class="custom-select">
              <button id="quartier-select-button" class="custom-select-button">
                <span class="custom-select-label">Choisissez un quartier</span>
              </button>
              <ul id="quartier-select-list" class="custom-select-list"></ul>
            </div>
            <select id="quartier-select" style="display:none !important;"></select>
          </div>

          <div class="info-block">
            <label>Type de partie :</label>

            <!-- Faux select styl√© -->
            <div id="game-mode-select-wrapper" class="custom-select">
              <button id="game-mode-select-button" class="custom-select-button">
                <span class="custom-select-label">Classique</span>
                <span class="difficulty-pill gamepill--classique">20 rues</span>
              </button>
              <ul id="game-mode-select-list" class="custom-select-list">
                <li data-value="classique">Classique <span class="difficulty-pill gamepill--classique">20 rues</span>
                </li>
                <li data-value="marathon">Marathon <span class="difficulty-pill gamepill--marathon">3 erreurs
                    max</span></li>
                <li data-value="chrono">Mode chrono <span class="difficulty-pill gamepill--chrono">1 minute</span>
                </li>
                <li data-value="lecture">Lecture <span class="difficulty-pill gamepill--lecture">Apprentissage</span>
                </li>
              </ul>
            </div>

            <select id="game-mode-select" style="display:none !important;">
              <option value="classique" selected>Classique</option>
              <option value="marathon">Marathon</option>
              <option value="chrono">Mode Chrono</option>
              <option value="lecture">Lecture</option>
              <option value="daily">Daily (5 essais)</option>
            </select>
          </div>

          <div class="actions-row">
            <button id="restart-btn" class="btn-primary">Commencer la session</button>
            <button id="skip-btn" class="btn-skip" style="display:none;">Passer</button>
            <button id="pause-btn" class="btn-secondary">Pause</button>
          </div>
        </section>

        <!-- Panneau Rue √† trouver -->
        <section class="panel target-panel">
          <div id="target-panel-title" class="panel-title">Rue √† trouver</div>
          <div id="target-street" class="target-name">‚Äî</div>
          <div id="daily-tries-counter" class="tries-counter" style="display:none;"></div>
        </section>

        <!-- Panneau infos rue principale -->
        <section id="street-info-panel" class="panel info-panel">
          <div class="panel-title">Infos rue principale</div>
          <div id="street-info" class="street-info"></div>
        </section>

        <!-- Panneau performance : chronos + score -->
        <section class="panel stats-panel">
          <div class="panel-title">Performance</div>

          <div class="stats-grid">
            <div class="stats-column stats-column--timers">
              <div class="stats-subtitle">‚è± Chronos</div>
              <div class="mobile-timer-label">Chrono</div>
              <div class="timers-row">
                <div class="timer-block">
                  <div class="timer-label">Session</div>
                  <div id="total-time" class="timer-value">0.0 s</div>
                </div>
                <div class="timer-block">
                  <div class="timer-label">Rue</div>
                  <div id="street-time" class="timer-value">0.0 s</div>
                </div>
              </div>
            </div>

            <div class="stats-column stats-column--score">
              <div class="stats-subtitle">‚òÖ Score</div>

              <div class="info-block score-block">
                <div class="info-label"></div>
                <div class="info-value">
                  <span id="score-pill" class="score-pill score-pill--neutral">
                    <span id="score">0 / 0 (0 %)</span>
                  </span>
                </div>
              </div>

              <div class="info-block weighted-score-block">
                <div class="weighted-score-container">
                  <div class="weighted-score-header">
                    <span>Score pond√©r√©</span>
                    <span id="weighted-score" class="weighted-score">0.0</span>
                  </div>

                  <div class="weighted-score-progress" aria-hidden="true">
                    <div id="weighted-score-bar" class="weighted-score-bar" style="width: 0%;"></div>
                  </div>

                  <div class="weighted-score-meta">
                    <small id="weighted-score-legend" class="weighted-score-legend">
                      Le score s‚Äôaffichera apr√®s votre premi√®re r√©ponse.
                    </small>

                    <div class="weighted-score-help-wrapper">
                      <button id="weighted-score-help-btn" type="button" class="weighted-score-help-btn"
                        aria-label="Information sur le score pond√©r√©">
                        i
                      </button>
                      <div id="weighted-score-help" class="weighted-score-help">
                        <strong>Score pond√©r√©</strong><br>
                        Chaque bonne r√©ponse rapporte jusqu'√† 10 points selon la rapidit√© : 1 point en moins par
                        seconde.
                        <br>
                        Au-del√† de 10 secondes, aucun point.<br><br>

                        Le score affich√© est la somme de tous les points de la session.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Panneau leaderboard -->
        <section class="panel leaderboard-panel">
          <details open>
            <summary class="panel-title">Leaderboard</summary>

            <div id="leaderboard" class="leaderboard"></div>
          </details>
        </section>

        <!-- Panneau messages + r√©cap -->
        <section class="panel panel-feedback">
          <div id="message" class="message"></div>
          <div id="summary" class="summary hidden"></div>
        </section>
      </div>
    </div>
    <div id="map"></div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="data_rules.js"></script>
  <script src="main.js"></script>
</body>

</html>